<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–∏—Ç–∞–π—Å–∫–∏–π –î–ó: –í—Ä–µ–º—è (HSK 1)</title>
  <script src="https://unpkg.com/roughjs@4.6.6/bundled/rough.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #fafafa;
      color: #333;
      max-width: 600px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      font-size: 1.4em;
      margin-bottom: 15px;
    }
    #clock-container {
      text-align: center;
      margin: 20px 0;
    }
    canvas {
      border: 1px solid #ddd;
      border-radius: 50%;
      background: white;
    }
    input {
      font-size: 1.1em;
      padding: 8px;
      width: 200px;
      text-align: center;
      margin: 10px 0;
    }
    button {
      padding: 8px 16px;
      font-size: 1em;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background: #357abd;
    }
    #feedback {
      margin-top: 10px;
      font-weight: bold;
      min-height: 2.5em;
      line-height: 1.5;
    }
    .correct { color: green; }
    .incorrect { color: red; }
    .rule {
      font-size: 0.95em;
      color: #555;
      font-style: italic;
      margin-top: 6px;
      display: block;
    }
  </style>
</head>
<body>
  <h1>–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ –∫–∏—Ç–∞–π—Å–∫–æ–º—É: –í—Ä–µ–º—è (HSK 1)</h1>
  <p>–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å? –ù–∞–ø–∏—à–∏—Ç–µ –æ—Ç–≤–µ—Ç –ø–æ-–∫–∏—Ç–∞–π—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: <em>‰∏âÁÇπ</em> –∏–ª–∏ <em>‰∏ÉÁÇπÂçä</em>).</p>

  <div id="clock-container">
    <canvas id="clock" width="240" height="240"></canvas>
  </div>

  <input type="text" id="answer" placeholder="‰∏âÁÇπ" autocomplete="off">
  <br>
  <button onclick="checkAnswer()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
  <div id="feedback"></div>

  <button onclick="generateNew()" style="margin-top: 15px;">–ù–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ</button>

  <script>
    const timeData = [
      {
        hour: 3, minute: 0, answer: '‰∏âÁÇπ',
        explanation: '‰∏âÁÇπ ‚Äî —Ç—Ä–∏ —á–∞—Å–∞',
        rule: '–¶–µ–ª—ã–π —á–∞—Å: [—á–∏—Å–ª–æ] + ÁÇπ. –ù–∞–ø—Ä–∏–º–µ—Ä: ‰∏âÁÇπ = 3 —á–∞—Å–∞.'
      },
      {
        hour: 7, minute: 0, answer: '‰∏ÉÁÇπ',
        explanation: '‰∏ÉÁÇπ ‚Äî —Å–µ–º—å —á–∞—Å–æ–≤',
        rule: '–¶–µ–ª—ã–π —á–∞—Å: [—á–∏—Å–ª–æ] + ÁÇπ. –ò–µ—Ä–æ–≥–ª–∏—Ñ—ã —á–∏—Å–µ–ª: ‰∏Ä, ‰∫å, ‰∏â‚Ä¶ ‰∏É = —Å–µ–º—å.'
      },
      {
        hour: 6, minute: 30, answer: 'ÂÖ≠ÁÇπÂçä',
        explanation: 'ÂÖ≠ÁÇπÂçä ‚Äî –ø–æ–ª–æ–≤–∏–Ω–∞ —Å–µ–¥—å–º–æ–≥–æ (6:30)',
        rule: '–ü–æ–ª–æ–≤–∏–Ω–∞: [—á–∞—Å] + ÁÇπ + Âçä. Âçä = "–ø–æ–ª–æ–≤–∏–Ω–∞". –ü—Ä–∏–º–µ—Ä: ÂÖ≠ÁÇπÂçä = 6 —á–∞—Å–æ–≤ + –ø–æ–ª–æ–≤–∏–Ω–∞.'
      },
      {
        hour: 8, minute: 30, answer: 'ÂÖ´ÁÇπÂçä',
        explanation: 'ÂÖ´ÁÇπÂçä ‚Äî –ø–æ–ª–æ–≤–∏–Ω–∞ –¥–µ–≤—è—Ç–æ–≥–æ',
        rule: '–ü–æ—Å–ª–µ ÁÇπ –≤—Å–µ–≥–¥–∞ –∏–¥—ë—Ç Âçä –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è 30 –º–∏–Ω—É—Ç. –ù–µ –≥–æ–≤–æ—Ä—è—Ç "ÂÖ´ÁÇπ‰∏âÂçÅ" –Ω–∞ HSK 1 ‚Äî —É–ø—Ä–æ—â–∞—é—Ç –¥–æ Âçä.'
      },
      {
        hour: 12, minute: 0, answer: 'ÂçÅ‰∫åÁÇπ',
        explanation: 'ÂçÅ‰∫åÁÇπ ‚Äî –¥–≤–µ–Ω–∞–¥—Ü–∞—Ç—å —á–∞—Å–æ–≤',
        rule: '–ß–∏—Å–ª–∞ –æ—Ç 11 –∏ –≤—ã—à–µ: ÂçÅ (10) + [–µ–¥–∏–Ω–∏—Ü–∞]. ÂçÅ‰∫å = 10 + 2 = 12.'
      },
      {
        hour: 10, minute: 30, answer: 'ÂçÅÁÇπÂçä',
        explanation: 'ÂçÅÁÇπÂçä ‚Äî –ø–æ–ª–æ–≤–∏–Ω–∞ –æ–¥–∏–Ω–Ω–∞–¥—Ü–∞—Ç–æ–≥–æ',
        rule: 'ÂçÅ = 10, Âçä = 30 –º–∏–Ω—É—Ç. –í—Å—ë –≤–º–µ—Å—Ç–µ: ÂçÅÁÇπÂçä = 10:30.'
      },
      {
        hour: 2, minute: 15, answer: '‰∏§ÁÇπÂçä',
        explanation: '‰∏§ÁÇπÂçä ‚Äî —É–ø—Ä–æ—â—ë–Ω–Ω–æ: "–ø–æ–ª–æ–≤–∏–Ω–∞ —Ç—Ä–µ—Ç—å–µ–≥–æ" (–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ 2:15, –Ω–æ –Ω–∞ HSK 1 —á–∞—Å—Ç–æ –æ–∫—Ä—É–≥–ª—è—é—Ç –¥–æ Âçä)',
        rule: '–î–ª—è "–¥–≤–∞ —á–∞—Å–∞" –≤ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö (—Å ÁÇπ) —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä—è—Ç ‰∏§, –∞ –Ω–µ ‰∫å. –ü–æ—ç—Ç–æ–º—É: ‰∏§ÁÇπÂçä, –∞ –Ω–µ ‰∫åÁÇπÂçä.'
      },
      {
        hour: 5, minute: 45, answer: 'ÂÖ≠ÁÇπÂ∑Æ‰∏ÄÂàª',
        explanation: 'ÂÖ≠ÁÇπÂ∑Æ‰∏ÄÂàª ‚Äî –±–µ–∑ —á–µ—Ç–≤–µ—Ä—Ç–∏ —à–µ—Å—Ç—å (5:45)',
        rule: '[—Å–ª–µ–¥—É—é—â–∏–π —á–∞—Å] + ÁÇπ + Â∑Æ + ‰∏ÄÂàª = "–±–µ–∑ —á–µ—Ç–≤–µ—Ä—Ç–∏ [—á–∞—Å]". –≠—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –Ω–∞ HSK 2+, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ.'
      }
    ];

    let currentTask = null;

    function drawClock(hour, minute) {
      const canvas = document.getElementById('clock');
      const rc = rough.canvas(canvas);
      const cx = 120, cy = 120, r = 100;

      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      rc.circle(cx, cy, r * 2, { stroke: 'black', fill: 'white', fillStyle: 'solid' });

      const labels = [
        { text: 'ÂçÅ‰∫å', x: cx, y: cy - r + 15 },
        { text: '‰∏â', x: cx + r - 20, y: cy + 5 },
        { text: 'ÂÖ≠', x: cx, y: cy + r - 10 },
        { text: '‰πù', x: cx - r + 20, y: cy + 5 }
      ];
      labels.forEach(lbl => {
        ctx.font = '16px Arial';
        ctx.textAlign = 'center';
        ctx.fillText(lbl.text, lbl.x, lbl.y);
      });

      const hourAngle = (hour % 12) * 30 + minute * 0.5 - 90;
      const hX = cx + Math.cos(hourAngle * Math.PI / 180) * r * 0.5;
      const hY = cy + Math.sin(hourAngle * Math.PI / 180) * r * 0.5;
      rc.line(cx, cy, hX, hY, { stroke: 'black', strokeWidth: 4 });

      const minAngle = minute * 6 - 90;
      const mX = cx + Math.cos(minAngle * Math.PI / 180) * r * 0.8;
      const mY = cy + Math.sin(minAngle * Math.PI / 180) * r * 0.8;
      rc.line(cx, cy, mX, mY, { stroke: 'black', strokeWidth: 2 });
    }

    function generateNew() {
      const task = timeData[Math.floor(Math.random() * timeData.length)];
      currentTask = task;
      drawClock(task.hour, task.minute);
      document.getElementById('answer').value = '';
      document.getElementById('feedback').innerHTML = '';
    }

    function checkAnswer() {
      const input = document.getElementById('answer').value.trim();
      const feedback = document.getElementById('feedback');
      if (!currentTask) return;

      const userAns = input.replace(/\s+/g, '');
      const correctAns = currentTask.answer;

      if (userAns === correctAns) {
        feedback.innerHTML = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Ç–ª–∏—á–Ω–æ!';
        feedback.className = 'correct';
      } else {
        feedback.innerHTML = `
          ‚ùå –ù–µ–≤–µ—Ä–Ω–æ.<br>
          –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <strong>${correctAns}</strong><br>
          ${currentTask.explanation}<br>
          <span class="rule">üí° –ü—Ä–∞–≤–∏–ª–æ: ${currentTask.rule}</span>
        `;
        feedback.className = 'incorrect';
      }
    }

    window.onload = generateNew;
  </script>
</body>
</html>